# =====================================
# ENVIRONMENT
# =====================================
NODE_ENV=production
PORT=3001

# =====================================
# TUNNEL CONFIGURATION
# =====================================
# DISABLE tunnel for production reliability
USE_DB_TUNNEL=false

# Only API tunnel needed in production
CLOUDFLARE_TUNNEL_TOKEN=eyJhIjoiYzFhOGFmOGQ5NmQ3Y2JiM2RiMDgwN2Q0MDMyZjkzY2EiLCJ0IjoiNGFhNjNiYjgtMzdhMS00Mjc3LTg3ZTAtNDQ1NDgxMGIwNGE2IiwicyI6Ill6WXpORGcxT0RjdFpHVTNNeTAwTmpVeExXRTBNRFl0TjJNM016a3hZemcwT1RSaiJ9
# Note: No CLOUDFLARE_SUPABASE_TUNNEL_TOKEN in production

# =====================================
# SUPABASE CONFIGURATION
# =====================================
# Direct connection only in production
SUPABASE_URL=https://uromexjprcrjfmhkmgxa.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVyb21leGpwcmNyamZtaGttZ3hhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU3NTgxOTUsImV4cCI6MjA3MTMzNDE5NX0.4iMC2ktj2nDlOYy-4NfNVHnV4i-tfCVFvgqR835cAOI
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVyb21leGpwcmNyamZtaGttZ3hhIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NTc1ODE5NSwiZXhwIjoyMDcxMzM0MTk1fQ.M_XwXITf1cYqT1-exKCpVzQTeY3gJb5qSprG1H-mWnM
META_APP_ID=1449604936071207
META_APP_SECRET=c9107cf010ca5bcf82236c71455fdc21

# =====================================
# INSTAGRAM APP CREDENTIALS (v3)
# =====================================
# Instagram-specific credentials for Graph API v23.0
INSTAGRAM_APP_ID=1595100661870639
INSTAGRAM_APP_SECRET=16c39820a855b2056b5ddc6c12d18b61

# Legacy compatibility - keep for /refresh-token endpoint (lines 2557-2558)
# Can remove after confirming INSTAGRAM_APP_* vars work in production
FACEBOOK_APP_ID=1595100661870639
FACEBOOK_APP_SECRET=16c39820a855b2056b5ddc6c12d18b61

# No SUPABASE_TUNNEL_URL in production

##admin login
VITE_SHOW_ADMIN_LINK=true

# ============================================
# AUTHENTICATION MODE - PRODUCTION
# ============================================
# ⚠️ CRITICAL: Set to 'facebook' for Meta compliance
# Only change to 'both' after Meta approval if needed
#
# Production Recommendation: 'facebook'
# - Ensures Meta Platform Terms compliance
# - Provides best user experience for Instagram Business
# - Required for Meta app review approval
#
# Available Options:
#   'facebook'  - RECOMMENDED for production (Meta compliant)
#   'instagram' - Legacy mode (not recommended for new deployments)
#   'both'      - Use only after Meta approval for user choice
VITE_AUTH_MODE=both



# ============================================
# META/FACEBOOK APP - PRODUCTION
# ============================================
# ⚠️ SECURITY: Use production app credentials only
# Never use development/test credentials in production
#
# Obtain from: https://developers.facebook.com/apps (Production App)
#
# Before deploying:
#   1. Ensure Meta app is approved for production use
#   2. Verify all Instagram Business permissions are granted
#   3. Configure Valid OAuth Redirect URIs in Meta Console
#   4. Add production domain to App Domains
#   5. Set Privacy Policy and Terms of Service URLs

# Production Meta App ID (from approved Meta app)
# Replace with your actual production app ID
VITE_META_APP_ID=YOUR_PRODUCTION_APP_ID

# Production Meta App Secret (Backend only)
# ⚠️ Store in secure environment variable manager
# Examples: AWS Secrets Manager, Render Environment Variables
# Replace with your actual production app secret
VITE_META_APP_SECRET=YOUR_PRODUCTION_APP_SECRET

# ============================================
# OAUTH CONFIGURATION - PRODUCTION
# ============================================
# Production callback URL (MUST match Meta Developer Console)
# Example: https://instagram-backend.888intelligenceautomation.in/auth/callback
#
# Uncomment and configure:
# VITE_OAUTH_REDIRECT_URI=https://your-production-domain.com/auth/callback

# ============================================
# DEPLOYMENT CHECKLIST
# ============================================
# Before deploying to production:
#   ✅ Replace ALL placeholder values above
#   ✅ Verify Meta Developer Console settings match
#   ✅ Test authentication flow in staging first
#   ✅ Enable Meta app for production use
#   ✅ Record screencast for Meta review (if required)
#
# Meta Developer Console Configuration:
#   ✅ Valid OAuth Redirect URIs: Must include callback URL
#   ✅ App Domains: Must include your production domain
#   ✅ Privacy Policy URL: Must be publicly accessible
#   ✅ Terms of Service URL: Must be publicly accessible
#   ✅ Data Deletion URL: Must be configured
#
# Post-Deployment Verification:
#   ✅ Test Facebook login flow end-to-end
#   ✅ Verify all permissions requested correctly
#   ✅ Check browser console for any errors
#   ✅ Validate OAuth callback handling works
#   ✅ Monitor authentication success/failure rates
# =====================================
# FRONTEND ENVIRONMENT VARIABLES
# =====================================
# Production uses direct Supabase connection
VITE_SUPABASE_URL=https://uromexjprcrjfmhkmgxa.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVyb21leGpwcmNyamZtaGttZ3hhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU3NTgxOTUsImV4cCI6MjA3MTMzNDE5NX0.4iMC2ktj2nDlOYy-4NfNVHnV4i-tfCVFvgqR835cAOI
VITE_API_URL=https://api.888intelligenceautomation.in
# Frontend Environment Variables (VITE_)
VITE_WEBHOOK_URL=https://api.888intelligenceautomation.in
VITE_API_BASE_URL=https://api.888intelligenceautomation.in
VITE_WEBHOOK_VERIFY_TOKEN=instagram_automation_cf_token_2024
VITE_META_APP_ID=1449604936071207
VITE_META_APP_SECRET=c9107cf010ca5bcf82236c71455fdc21

# Instagram App ID for frontend (NO SECRET - public safe)
VITE_INSTAGRAM_APP_ID=1595100661870639


# =====================================
# STATIC IP (CRITICAL FOR PRODUCTION)
# =====================================
BACKEND_STATIC_IP=YOUR.ACTUAL.STATIC.IP

# =====================================
# INSTAGRAM API (Production)
# =====================================
INSTAGRAM_CLIENT_ID=1595100661870639
INSTAGRAM_CLIENT_SECRET=16c39820a855b2056b5ddc6c12d18b61
INSTAGRAM_REDIRECT_URI=https://instagram-backend.888intelligenceautomation.in/auth/instagram/callback

# =====================================
# ENCRYPTION & SECURITY (DIFFERENT FROM DEV!)
# =====================================
ENCRYPTION_KEY=your_prod_encryption_key_must_be_different
JWT_SECRET=your_prod_jwt_secret_must_be_different
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# =====================================
# N8N WEBHOOKS
# =====================================
N8N_BASE_URL=n8n.888intelligenceautomation.in
N8N_WEBHOOK_SECRET=your_webhook_secret
    
# =====================================
# ADMIN CREDENTIALS (Consider changing for production)
# =====================================
ADMIN_EMAIL=admin@888intelligence.com
ADMIN_PASSWORD=ProductionSecurePassword2024!

# ============================================
# FIXIE STATIC IP PROXY CONFIGURATION
# ============================================
# Enable proxy (set to true after successful testing)
USE_FIXIE_PROXY=true

# Fixie HTTP Proxy (for general HTTP requests)
# Format: http://fixie:TOKEN@subdomain.usefixie.com:80
FIXIE_URL=http://fixie:4uw0DeBh6Cpn37W@ventoux.usefixie.com:80

# Fixie SOCKS5 Proxy (for database connections)
# Format: username:password@criterium.usefixie.com:1080
FIXIE_SOCKS_HOST=fixie:7kdXlctJx7yMwM1@galibier.usefixie.com:1080

# Static IP addresses (comma-separated, from Fixie dashboard)
FIXIE_STATIC_IPS=34.247.192.99,3.255.12.30,54.217.142.99,54.195.3.54


# Proxy timeout (milliseconds)
PROXY_TIMEOUT=30000

# Proxy retry attempts on failure
PROXY_RETRY_ATTEMPTS=3

# =====================================
# AGENT CONFIGURATION (LangChain Oversight Brain)
# =====================================
# Required for POST /api/instagram/oversight/chat
AGENT_URL=http://langchain-agent:3002
AGENT_API_KEY=dqoSRrL3FJkXoUnI8B1HQ1Zpc2pEO3EsoMveDm0XB80

# =====================================
# PROACTIVE SYNC (Bus 1: Backend-driven cron)
# =====================================
# Enabled in production — backend autonomously syncs Instagram data to Supabase
PROACTIVE_SYNC_ENABLED=true
PROACTIVE_COMMENTS_CRON=*/3 * * * *
PROACTIVE_UGC_CRON=0 */3 * * *
PROACTIVE_INSIGHTS_CRON=0 2 * * *

# Post Queue Fallback (Bus 2: outgoing IG write retry)
POST_FALLBACK_ENABLED=true
POST_FALLBACK_CRON=*/5 * * * *

# Heartbeat failover
HEARTBEAT_STALE_MINUTES=30

# =====================================
# AGENT VARS (LangChain Oversight Brain — docker-compose.unified.yml)
# NOTE: OLLAMA_HOST, REDIS_HOST, REDIS_PORT, BACKEND_API_URL are
# hard-set in compose environment: blocks — do NOT add them here.
# =====================================

# Supabase alias — agent reads SUPABASE_KEY, backend reads SUPABASE_SERVICE_KEY.
# Both must be set to the same service-role key value.
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVyb21leGpwcmNyamZtaGttZ3hhIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NTc1ODE5NSwiZXhwIjoyMDcxMzM0MTk1fQ.M_XwXITf1cYqT1-exKCpVzQTeY3gJb5qSprG1H-mWnM

# Webhook HMAC secret for order webhooks
ORDER_WEBHOOK_SECRET=your-order-webhook-hmac-secret

# Agent identity
AGENT_USER_ID=agent-service
# Stable UUID — generate once: python3 -c "import uuid; print(uuid.uuid4())"
HEARTBEAT_AGENT_ID=your-stable-uuid-here
HEARTBEAT_ENABLED=true
HEARTBEAT_INTERVAL_MINUTES=20

# Ollama model
OLLAMA_MODEL=hf.co/MaziyarPanahi/Nemotron-Orchestrator-8B-GGUF:Q5_K_M
MAX_CONCURRENT_LLM=4

# Engagement monitor
ENGAGEMENT_MONITOR_ENABLED=true
ENGAGEMENT_MONITOR_INTERVAL_MINUTES=5
ENGAGEMENT_MONITOR_MAX_COMMENTS_PER_RUN=50
ENGAGEMENT_MONITOR_AUTO_REPLY_ENABLED=true
ENGAGEMENT_MONITOR_CONFIDENCE_THRESHOLD=0.75
ENGAGEMENT_MONITOR_HOURS_BACK=24

# Content scheduler
CONTENT_SCHEDULER_ENABLED=true
AUTO_PUBLISH=false
POST_APPROVAL_THRESHOLD=0.6

# UGC collection
UGC_COLLECTION_ENABLED=true
UGC_COLLECTION_AUTO_SEND_DM=false
UGC_COLLECTION_AUTO_REPOST=false

# Analytics
ANALYTICS_REPORTS_ENABLED=true
ANALYTICS_LLM_INSIGHTS_ENABLED=false
SALES_ATTRIBUTION_ENABLED=true
WEEKLY_LEARNING_ENABLED=true

# Oversight / chat stream
OVERSIGHT_STREAM_ENABLED=true
OVERSIGHT_AUTO_CONTEXT_LIMIT=12
OVERSIGHT_LLM_TIMEOUT_SECONDS=15

# Outbound queue (Redis-backed IG API rate limiter)
OUTBOUND_QUEUE_ENABLED=true